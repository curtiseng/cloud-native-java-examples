# 6. domain and service design

Date: 2018-12-28

## Status

Accepted

## Context

使用事件风暴对领域模型以及上下文进行分析，并对服务进行设计

## Decision

根据不同场景的事件风暴，得出主要分为认证授权、账户管理、用户管理、资源管理、多租户、审计几个领域模型；

因为UAA主要责任是账户和授权，虽然他依赖于用户和资源，但仅使用查询，所以使用CQRS将用户和资源管理拆分为单独的服务；

数据一致性的保证交有三种方案：

+ 一主多从：UAA仅使用主节点，管理服务写操作使用主节点，读操作使用从节点
+ 多区域一主多从
+ 使用强一致性的数据库：NewSql 

## Consequences

